<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <pre>
        정규 표현식 REGula EXPression
        - flag
            g (global) : 일치하는 모든 값
            i (ignore) : 대소문자 무시
            m (multiline) : 줄 단위로 표현식 사용
        - pattern
            . : 한개
            + : 한개 이상
            * : 0개 이상
            ? : 0 또는 1개
            {n} : n개
            {n, m} : n ~ m개

            a-zA-Z : 영어
            ㄱ-ㅎ가-힣 : 한글
            0-9 : 숫자

            [] : 집합
            () : 그룹
            | : 또는

            \d : 숫자 (0 - 9)
            \D : 숫자가 아님
            \w : 문자
            \W : 문자가 아님
            \s : 공백 (space)
            \S : 공백이 아님
            \b : 단어의 처음/끝
            \B : 단어의 처음/끝이 아님

            ^ : 문자열 시작
            $ : 문자열 끝
        - 형태
            const regexp = /pattern/[flag];
            const regexp = new RegExp(/pattern/[, "flag"]);
            const regexp = new RegExp("pattern"[, "flag"]);
    </pre>
    <script>

        // 전화번호 유효성 검사
        const phone01 = "010-1234-5678";
        const phone02 = "010-1234-56789";

        // /시작한다 010 - 숫자 4개 - 숫자 4개  /
        const valid01 = /^010-\d{4}-\d{4}$/;
        console.log(valid01.test(phone01));
        console.log(valid01.test(phone02));

        // 검사하지않는숙제
        // 정규표현식에서 $가 무슨 역할을 하는지


        // email 유효성 검사
        const email01 = "dongheon.dev@gmail.com";
        const email02 = "admin1234@admin.net";
        const email03 = "admin-1234@admin";

        // 정규 표현식 객체로 만들기
        // / [문자 숫자 . -] 한 개 이상 @ [문자 숫자 . -] 한 개 이상 \.(escape sequence) [문자] 한 개 이상   / 대소문자 무시(flag)
        const valid02 = new RegExp(/[\w\d.-]+@[\w\d.-]+\.[\w]+/i);
        console.log(valid02.test(email01));
        console.log(valid02.test(email02));
        console.log(valid02.test(email03));
        
        
        // home server log
        const logs = `udp     UNCONN   0        0                0.0.0.0:56900          0.0.0.0:*
udp     UNCONN   0        0             127.0.0.54:53             0.0.0.0:*
udp     UNCONN   0        0          127.0.0.53%lo:53             0.0.0.0:*
udp     UNCONN   0        0            224.0.0.251:5353           0.0.0.0:*      users:(("chrome",pid=1972145,fd=229))
udp     UNCONN   0        0            224.0.0.251:5353           0.0.0.0:*      users:(("chrome",pid=1972145,fd=227))
udp     UNCONN   0        0                0.0.0.0:5353           0.0.0.0:*
udp     UNCONN   0        0                   [::]:43786             [::]:*
udp     UNCONN   0        0                   [::]:5353              [::]:*
tcp     LISTEN   0        4096             0.0.0.0:1521           0.0.0.0:*
tcp     LISTEN   0        4096           127.0.0.1:631            0.0.0.0:*
tcp     LISTEN   0        4096          127.0.0.54:53             0.0.0.0:*
tcp     LISTEN   0        4096             0.0.0.0:8080           0.0.0.0:*
tcp     LISTEN   0        4096             0.0.0.0:27017          0.0.0.0:*
tcp     LISTEN   0        4096       127.0.0.53%lo:53             0.0.0.0:*
tcp     LISTEN   0        4096                [::]:1521              [::]:*
tcp     LISTEN   0        100                    *:9090                 *:*      users:(("java",pid=49320,fd=41))
tcp     LISTEN   0        4096                   *:22                   *:*
tcp     LISTEN   0        32                     *:21                   *:*
tcp     LISTEN   0        4096                [::]:8080              [::]:*
tcp     LISTEN   0        4096               [::1]:631               [::]:*
tcp     LISTEN   0        4096                [::]:27017             [::]:*`
        

        // ip 출력
        const reg_ip = /[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}/g

        //exec
        console.log(reg_ip.exec(logs));

        // string.prototype
        // match
        console.log(logs.match(reg_ip));
        // search
        console.log(logs.search(reg_ip));

        // 27017을 포함하고 있는 모든 줄
        const reg_27017 = /.*27017.*/gm
        console.log(logs.match(reg_27017));

        // port만 출력
        const reg_port = /:[\d]+/g;
        console.log(logs.match(reg_port));

        // : 없애자.
        ports = logs.match(reg_port); // port만 출력한거 가져옴
        ports_replace = ports.map((item) => {return item.replace(":", "")});
        console.log(ports_replace);

        // 중복 없애자
        const result = new Set(ports_replace);
        console.log(result);

    </script>
</body>
</html>