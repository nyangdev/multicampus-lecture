<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <style type="text/css">
        img{
            width: 150px;
            height: 150px;
            float: left;
        }
        
        #menubox{position: relative;}
        #menu{overflow: auto;}
    
        .sel{
            width: 140px;
            height: 140px;
            border: 5px dotted yellow;
            position: absolute;
            left: 300px;
        }
        
        button{
            width: 150px;
            height: 50px;
            margin-left: 300px;
        }
    </style>
    
    <script>
        // window에 addEventListener
        // 전체 웹페이지 로드 load
        // 전체 웹페이지 로드 후 실행되는 이벤트 리스너
        window.addEventListener("load", () => {

            console.log('5초 후 실행합니다.');

            // 5000ms 이후에 button 요소 클릭이벤트 실행
            const btnClick = setTimeout(()=>{
                document.querySelector("button").click();
                }, 5000);

            // button 요소에 클릭 이벤트 발생시 실행되는 이벤트
            document.querySelector("button").addEventListener("click", function() {

                // images에 img 요소 할당
                const images = document.querySelectorAll("img");

                // images를 배열로 변환해서 요소 순회
                Array.from(images).forEach((item)=>{
                    // debugger
                    // 순회하는 요소에 active 클래스 추가
                    item.classList.toggle("active");
                })

                // interval 변수 선언
                let interval;

                // 클릭이벤트 발생한 버튼의 텍스트가 start 라면
                if (this.textContent === "start") {
                    // 버튼 텍스트가 stop으로
                    this.textContent = "stop";

                    // interval 변수에 setInterval() 메서드 할당
                    // 50ms 마다 반복적으로 실행
                    interval = setInterval(()=>{

                        // div에 id menu 요소 할당
                        const div = document.querySelector("#menu");

                        // debugger
                        // child에 class active 요소 할당
                        const child = document.querySelector(".active");
                        // console.log(child)

                        // child가 null 값이 아닐때
                        if (child != null) {
                            // div에 child 값 append
                            div.appendChild(child);
                        }
                    }, 50);
                } else {
                    // 클릭이벤트 발생한 버튼의 텍스트가 start가 아니라면
                    // setInterval() 메서드 실행 취소
                    clearInterval(interval);
                    // 버튼의 텍스트 start로 변경
                    this.textContent = "start";
                    // debugger
                    // img 태그의 요소들에서 3번째 태그의 alt 값 가져오기
                    const alt = document.querySelectorAll("img")[2].alt;
                    alert(`선택된 이미지 : ${alt}`);
                }
            });
        });
    </script>
</head>
<body>
    
	<h1>timer</h1>
	
	<div id="menubox">
		<div class="sel"></div>
		<div id="menu">
			<img alt="img01" src="resources/images/img01.png">
			<img alt="img02" src="resources/images/img02.png">
			<img alt="img03" src="resources/images/img03.png">
			<img alt="img04" src="resources/images/img04.png">
			<img alt="img05" src="resources/images/img05.png">
		</div>
		<button>start</button>
	</div>
	
</body>
</html>